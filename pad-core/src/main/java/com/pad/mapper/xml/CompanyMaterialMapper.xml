<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pad.mapper.CompanyMaterialMapper">
    <resultMap id="MaterialMap" type="com.pad.entity.CompanyMaterial">
        <id property="id" column="id" jdbcType="VARCHAR"/>
        <result property="cNo" column="c_no" jdbcType="VARCHAR"/>
        <result property="legalPhone" column="legal_phone" jdbcType="VARCHAR"/>
        <result property="legalName" column="legal_name" jdbcType="VARCHAR"/>
        <result property="legalId" column="legal_id" jdbcType="VARCHAR"/>
        <result property="legalImg" column="legal_img" jdbcType="VARCHAR"/>
        <result property="turnover" column="turnover" jdbcType="VARCHAR"/>
        <result property="value" column="value" jdbcType="DOUBLE"/>
        <result property="credit" column="credit" jdbcType="VARCHAR"/>
        <result property="collateral" column="collateral" jdbcType="VARCHAR"/>
        <result property="collateralPhoto" column="collateral_photo" jdbcType="VARCHAR"/>
        <result property="records" column="records" jdbcType="VARCHAR"/>
        <result property="status" column="status" jdbcType="INTEGER"/>
        <!--企业用户基本信息  一对一-->
        <association property="companyInfo" javaType="com.pad.entity.CompanyInfo"
                     select=""
                     column="cNo"/>
    </resultMap>

    <!--模糊查询-->
    <select id="findByComplex" resultMap="MaterialMap">
        select * from company_material
        <where>
            <if test="cNo!=null">
                and c_no like concat('%',#{cNo},'%')
            </if>
            <if test="legalPhone!=null">
                and legal_phone like concat('%',#{legalPhone},'%')
            </if>
            <if test="legalName!=null">
                and legal_name like concat('%',#{legalName},'%')
            </if>
            <if test="status!=null">
                and status like concat('%',#{status},'%')
            </if>
        </where>
    </select>

    <!--外键查询-->
    <select id="selectByPK" resultMap="MaterialMap">
        select * from company_material where c_no=#{cNo,jdbcType=VARCHAR}
    </select>
</mapper>
